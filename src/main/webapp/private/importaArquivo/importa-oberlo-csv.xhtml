<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="titulo">Importar Arquivo Oberlo</ui:define>
    <ui:define name="corpo">
        <h:form id="formOberlo">
        <p:growl id="messagens" showDetail="true"/>
        <p:fileUpload fileUploadListener="#{oberloCsvControlador.upload}" mode="advanced" label="Selecionar Arquivo"
                      auto="true" sizeLimit="500000" allowTypes="/(\.|\/)(csv|txt)$/" update="messagens tabelaPedido tabelaProduto tabelaPedidoAliexpress tabelaRastreamento tabelaItens" />

        <p:dataTable var="pedido" value="#{oberloCsvControlador.pedidosShopifyDto}"
                     emptyMessage="Nenhum registro" id="tabelaPedido" style="margin-top: 15px"
                     rows="3" paginator="true" rowsPerPageTemplate="5,10,20,40,80"
                     currentPageReportTemplate="Intervalo {startRecord}-{endRecord} do total de {totalRecords} registros"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Pedidos
            </f:facet>
            <p:column headerText="Pedido">
                <p:outputLabel value="##{pedido.numeroPedido}"/>
            </p:column>
            <p:column headerText="Data">
                <p:outputLabel value="#{pedido.dataFormatada}"/>
            </p:column>
            <p:column headerText="Cliente">
                <p:outputLabel value="#{pedido.nomeCliente}"/>
            </p:column>
            <p:column headerText="Cidade">
                <p:outputLabel value="#{pedido.nomeCidadeCliente}"/>
            </p:column>
            <p:column headerText="Estado">
                <p:outputLabel value="#{pedido.nomeEstadoCliente}"/>
            </p:column>
            <p:column headerText="CEP">
                <p:outputLabel value="#{pedido.cepCliente}"/>
            </p:column>
            <p:column>
                <p:button outcome="/private/detalhe/detalhe-pedido" value="Detalhar">
                    <f:param name="pedido" value="#{pedido.numeroPedido}"/>
                </p:button>
            </p:column>
        </p:dataTable>

        <p:dataTable var="produto" value="#{oberloCsvControlador.produtos}"
                     emptyMessage="Nenhum registro" id="tabelaProduto" style="margin-top: 15px"
                     rows="3" paginator="true" rowsPerPageTemplate="5,10,20,40,80"
                     currentPageReportTemplate="Intervalo {startRecord}-{endRecord} do total de {totalRecords} registros"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Produtos
            </f:facet>
            <p:column headerText="SKU">
                <p:outputLabel value="#{produto.skuProduto}"/>
            </p:column>
            <p:column headerText="Produto">
                <p:outputLabel value="#{produto.nomeProduto}"/>
            </p:column>
            <p:column headerText="Variante">
                <p:outputLabel value="#{produto.varianteProduto}"/>
            </p:column>
        </p:dataTable>

        <p:dataTable var="pedidoAliexpress" value="#{oberloCsvControlador.pedidosAliexpress}"
                     emptyMessage="Nenhum registro" id="tabelaPedidoAliexpress" style="margin-top: 15px"
                     rows="3" paginator="true" rowsPerPageTemplate="5,10,20,40,80"
                     currentPageReportTemplate="Intervalo {startRecord}-{endRecord} do total de {totalRecords} registros"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Aliexpress
            </f:facet>
            <p:column headerText="Numr Pedido">
                <p:outputLabel value="#{pedidoAliexpress.idAliexpress}"/>
            </p:column>
            <p:column headerText="Data Limite Disputa">
                <p:outputLabel value="#{pedidoAliexpress.dataLimiteDisputaFormatada}"/>
            </p:column>
            <p:column headerText="Status">
                <p:outputLabel value="#{pedidoAliexpress.statusPedidoAliexpress}"/>
            </p:column>
            <p:column>
                <p:button outcome="/private/detalhe/detalhe-pedido-aliexpress" value="Detalhar">
                    <f:param name="pedidoAliexpress" value="#{pedidoAliexpress.idAliexpress}"/>
                </p:button>
            </p:column>
        </p:dataTable>

        <p:dataTable var="rastreamento" value="#{oberloCsvControlador.rastreamentosDto}"
                     emptyMessage="Nenhum registro" id="tabelaRastreamento" style="margin-top: 15px"
                     rows="3" paginator="true" rowsPerPageTemplate="5,10,20,40,80"
                     currentPageReportTemplate="Intervalo {startRecord}-{endRecord} do total de {totalRecords} registros"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Correios
            </f:facet>
            <p:column headerText="Cód Rastreamento">
                <p:outputLabel value="#{rastreamento.codigoRastreamento}"/>
            </p:column>
            <p:column headerText="Data Ultima Atualização">
                <p:outputLabel value="#{rastreamento.dataUltimaAtualizacaoFormatada}"/>
            </p:column>
        </p:dataTable>

        <p:dataTable var="item" value="#{oberloCsvControlador.itens}"
                     emptyMessage="Nenhum registro" id="tabelaItens" style="margin-top: 15px"
                     rows="3" paginator="true" rowsPerPageTemplate="5,10,20,40,80"
                     currentPageReportTemplate="Intervalo {startRecord}-{endRecord} do total de {totalRecords} registros"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Itens
            </f:facet>
            <p:column headerText="Pedido Shopify">
                <p:outputLabel value="##{item.pedidoShopify.numeroPedido}"/>
            </p:column>
            <p:column headerText="Pedido Aliexpress">
                <p:outputLabel value="#{item.pedidoAliexpress.idAliexpress}"/>
            </p:column>
            <p:column headerText="Quantidade">
                <p:outputLabel value="#{item.quantidadeProduto}"/>
            </p:column>
            <p:column headerText="Cód Rastreamento">
                <p:outputLabel value="#{item.rastreamento.codigoRastreamento}"/>
            </p:column>
        </p:dataTable>
    </h:form>
</ui:define>
</ui:composition>